---
import Layout from '../layouts/Layout.astro'
import HeroSection from '../components/sections/HeroSection'
import ProjectsSection from '../components/sections/ProjectsSection'
import { getLangFromUrl, useTranslations } from '../i18n/ui'
import { getFeaturedProjects } from '../data/projects'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
const featuredProjects = getFeaturedProjects()
---

<Layout title={t('hero.title')} lang={lang}>
  <HeroSection
    title={t('hero.title')}
    subtitle={t('hero.subtitle')}
    description={t('hero.description')}
    ctaProjects={t('hero.cta.projects')}
    ctaContact={t('hero.cta.contact')}
    lang={lang}
    client:load
  />
  
  <ProjectsSection
    title={t('projects.title')}
    projects={featuredProjects}
    viewAllText={t('projects.viewAll')}
    lang={lang}
    client:load
  />

  <!-- Floating Micro-Interactions Demo -->
  <div id="floating-demo"></div>
</Layout>

<script>
  import { FloatingMicroInteractionsDemo } from '../components/examples'
  import { createRoot } from 'react-dom/client'
  import React from 'react'

  // Get language from URL
  const lang = window.location.pathname.startsWith('/fr') ? 'fr' : 'en'
  
  // Mount the floating demo component
  const container = document.getElementById('floating-demo')
  if (container) {
    const root = createRoot(container)
    root.render(React.createElement(FloatingMicroInteractionsDemo, { lang }))
  }
</script>
